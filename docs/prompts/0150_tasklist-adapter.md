---
wbs: "0004"
topic: "rd2:tasks Agent Skill Upgrade"
description: "Implement TaskList integration for reading tasks from Claude Code"
status: Backlog
created_at: "2026-02-02"
updated_at: "2026-02-02"
impl_progress:
  planning: pending
  design: pending
  implementation: pending
  review: pending
  testing: pending
---

## 0150. TaskList Adapter Implementation

### Background

The TaskList tool (introduced in Claude Code v2.1.16) provides a way to query active tasks in the current session without triggering updates. This is essential for:

1. **Efficient Queries**: Reading task state without side effects
2. **UI Integration**: Polling task state for display without modifying it
3. **Sync Operations**: Checking current state before syncing with file system

The TaskList adapter will translate between Claude Code's native TaskList response format and the rd2:tasks internal Task format.

### Requirements

1. **TaskList Tool Integration**: Properly call TaskList tool
2. **Response Parsing**: Parse TaskList response and convert to internal Task format
3. **Error Handling**: Handle tool unavailability and error responses
4. **Empty State Handling**: Return empty array when no tasks exist
5. **Stats Generation**: Include task statistics (total, pending, in_progress, completed)
6. **Filtering Support**: Optionally filter tasks by status
7. **Pagination**: Handle large task lists (if pagination is needed)

### Q&A

[Clarifications to be added during planning phase]

### Design

[Architecture specs to be added by specialists]

### Plan

1. Implement TaskListAdapter class
2. Handle TaskList input/output format conversion
3. Add error handling for tool failures
4. Implement filtering options
5. Add unit tests
6. Test integration with actual TaskList tool

### Artifacts

| Type | Path | Generated By | Date |
| ---- | ---- | ------------ | ---- |

### References

- [Master Task: 0001_rd2-tasks-upgrade.md](/docs/prompts/0001_rd2-tasks-upgrade.md)
- [Claude Code SDK - Todo Tracking](https://docs.claude.com/en/docs/claude-code/sdk/todo-tracking)
