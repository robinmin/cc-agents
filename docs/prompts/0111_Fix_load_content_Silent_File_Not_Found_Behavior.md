---
name: Fix load_content Silent File Not Found Behavior
description: Task: Fix load_content Silent File Not Found Behavior
status: Done
created_at: 2026-01-29 23:06:27
updated_at: 2026-01-30 00:15:00
impl_progress:
  planning: completed
  design: completed
  implementation: completed
  review: completed
  testing: completed
---

## 0111. Fix load_content Silent File Not Found Behavior

### Background

The `load_content()` function at lines 694-702 of `image_generator.py` has silent behavior when a file path doesn't exist - it returns the input string as-is (treating it as raw text). This can be confusing when users make a typo in the filename.

Current behavior: If `article.md` doesn't exist, the string `"article.md"` is returned as raw text content, which is then used as the article content.

### Requirements

1. **Add a warning** when a file path looks like a file but doesn't exist
2. **Improve user experience** by distinguishing between file paths and raw text
3. **Consider adding a flag** like `--raw` to explicitly pass raw text content

**Acceptance Criteria**:
- [x] Warning message shown when file path doesn't exist
- [x] File paths are detected (contains `/`, `\`, or common extensions like `.md`)
- [x] Users can still use raw text if needed
- [x] Tests added for the new behavior

### Q&A

**Q:** What happens if a user passes raw text without file-like characteristics?
**A:** No warning is shown. The warning only appears when the input looks like a file path (contains path separators or has common file extensions).

### Design

**Solution:**
- Added file path detection heuristics:
  - Contains path separators (`/` or `\`)
  - Has common file extensions (`.md`, `.txt`, `.html`, etc.)
- Shows helpful warning when input looks like file but doesn't exist
- Still allows raw text input (just returns the input string)
- Warning message includes helpful hints about quoting and typos

**Files Modified:**
- `/Users/robin/projects/cc-agents/plugins/wt/skills/image-generate/scripts/image_generator.py`
- `/Users/robin/projects/cc-agents/plugins/wt/skills/image-generate/tests/test_image_generator.py`

### Plan

**Phase 1: Implementation**
- [x] Added file path detection heuristics to `load_content()`
- [x] Added warning message when file-like path doesn't exist
- [x] Warning includes helpful hints about typos and quoting

**Phase 2: Testing**
- [x] Updated `test_load_content_file_not_found` to check for warning
- [x] Added `test_load_content_file_not_found_with_path_separator` test
- [x] Added `test_load_content_file_not_found_backslash_separator` test
- [x] Added `test_load_content_raw_text_no_warning` test

**Phase 3: Verification**
- [x] Warning shows for file-like paths
- [x] No warning for raw text
- [x] Raw text still works as before
- [x] Tests pass successfully

### Artifacts

| Type | Path | Generated By | Date |
|------|------|--------------|------|
| Code Change | `/Users/robin/projects/cc-agents/plugins/wt/skills/image-generate/scripts/image_generator.py` | super-coder | 2026-01-29 |
| Test Update | `/Users/robin/projects/cc-agents/plugins/wt/skills/image-generate/tests/test_image_generator.py` | super-coder | 2026-01-29 |

### References

- Original task: Task 0111
- Related: `plugins/wt/skills/image-generate/scripts/image_generator.py` lines 679-736 (load_content function)
