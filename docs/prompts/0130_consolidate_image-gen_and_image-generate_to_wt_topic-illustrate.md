---
name: consolidate-image-gen-and-image-generate-to-wt-topic-illustrate
description: Consolidate image-gen and image-generate commands into single wt:topic-illustrate command
status: Done
created_at: 2026-01-30
updated_at: 2026-01-30
impl_progress:
  planning: completed
  design: completed
  implementation: completed
  review: completed
  testing: completed
dependencies: []
tags: [wt, commands, consolidate, refactoring, image-generation]
---

## 0130. Consolidate image-gen and image-generate to wt:topic-illustrate

### Background

The wt plugin currently has two duplicate image generation commands: `image-gen.md` and `image-generate.md` (both are identical). These need to be consolidated into a single `wt:topic-illustrate` command that serves as Stage 4 of the Technical Content Workflow.

The new command name `topic-illustrate` better reflects the workflow context: generating illustrations (cover images, inline diagrams) for technical content topics.

This task implements the design from `/Users/robin/projects/cc-agents/docs/plans/2026-01-30-it-writer-agent-redesign.md` which calls for consolidating image commands into `wt:topic-illustrate`.

### Requirements

**Functional Requirements:**
- Create new command file `/Users/robin/projects/cc-agents/plugins/wt/commands/topic-illustrate.md`
- Consolidate functionality from both `image-gen.md` and `image-generate.md`
- Support all existing arguments and features (prompts, templates, styles, resolutions)
- Remove both old files (`image-gen.md` and `image-generate.md`)

**Non-Functional Requirements:**
- Maintain backward compatibility for all existing image generation features
- Preserve support for templates (cover, illustrator, default)
- Preserve support for all style presets and resolutions
- Preserve Python script delegation pattern

**Acceptance Criteria:**
- [ ] New command file exists at `plugins/wt/commands/topic-illustrate.md`
- [ ] Command frontmatter uses `topic-illustrate` name with appropriate description
- [ ] Title/heading updated to "Topic Illustrate"
- [ ] Quick Start section includes all common image generation patterns
- [ ] Usage section shows Python script delegation
- [ ] Arguments table includes all parameters (prompt, output, resolution, style, backend, steps, timeout, template, var, content, number, list-templates)
- [ ] Style Options table preserved
- [ ] Templates table preserved
- [ ] Environment Variables section preserved
- [ ] Examples use `/wt:topic-illustrate` command
- [ ] Both old files removed: `image-gen.md` and `image-generate.md`
- [ ] Related Commands section references other topic-* commands

### Q&A

**Q:** Should I create backward compatibility aliases?
**A:** No, that's handled by task 0131 (Create backward compatibility aliases). This task only creates the new consolidated command and removes the old ones.

**Q:** What about the `doc-image.md` command?
**A:** That's a separate workflow command that delegates to the image generation skills. This task only consolidates the direct Python script wrappers.

### Design

**Technology Stack:**
- Markdown command file following wt plugin conventions
- Delegation to `image_generator.py` Python script

**Implementation Approach:**
1. Read both existing files (they're identical, but verify)
2. Create new `topic-illustrate.md` with consolidated content
3. Update command name and title throughout
4. Update examples to use new command name
5. Update Related Commands to reference new topic-* commands
6. Delete both old files

### Plan

1. **Create New Consolidated Command File**
   - [ ] Read `plugins/wt/commands/image-gen.md` (or `image-generate.md`)
   - [ ] Create `plugins/wt/commands/topic-illustrate.md`
   - [ ] Update frontmatter: name, description, argument-hint
   - [ ] Update title from "Image Generate" to "Topic Illustrate"
   - [ ] Update Quick Start examples to use `/wt:topic-illustrate`
   - [ ] Update Usage section with new command name
   - [ ] Preserve all Arguments table entries
   - [ ] Preserve Style Options table
   - [ ] Preserve Templates table
   - [ ] Preserve Environment Variables section
   - [ ] Update Related Commands section to reference topic-* commands
   - [ ] Update See Also section
2. **Remove Old Duplicate Files**
   - [ ] Delete `plugins/wt/commands/image-gen.md`
   - [ ] Delete `plugins/wt/commands/image-generate.md`

### Artifacts

| Type | Path | Generated By | Date |
|------|------|--------------|------|
| New command | `/Users/robin/projects/cc-agents/plugins/wt/commands/topic-illustrate.md` | super-planner | 2026-01-30 |
| Deleted | `/Users/robin/projects/cc-agents/plugins/wt/commands/image-gen.md` | super-planner | 2026-01-30 |
| Deleted | `/Users/robin/projects/cc-agents/plugins/wt/commands/image-generate.md` | super-planner | 2026-01-30 |

### References

- Design document: `/Users/robin/projects/cc-agents/docs/plans/2026-01-30-it-writer-agent-redesign.md`
- Source files: `/Users/robin/projects/cc-agents/plugins/wt/commands/image-gen.md`, `/Users/robin/projects/cc-agents/plugins/wt/commands/image-generate.md`
