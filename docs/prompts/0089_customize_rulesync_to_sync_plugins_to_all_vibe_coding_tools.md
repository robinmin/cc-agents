---
name: customize rulesync to sync plugins to all vibe coding tools
description: Task: customize rulesync to sync plugins to all vibe coding tools
status: Done
created_at: 2026-01-26 22:32:00
updated_at: 2026-01-27 00:00:00
impl_progress:
  planning: completed
  design: completed
  implementation: completed
  review: completed
  testing: completed
---

## 0089. customize rulesync to sync plugins to all vibe coding tools

### Background

As we already developed Agents Skills to work with the following vibe coding tools:

- Antigravity
- auggie
- gemini CLI
- opencode

We need to use external tool `rulesync` to customize it to sync all plugins in current project to the proper destinations via a bash script in folder @scripts/.

You can refer to [dyoshikawa/rulesync](https://github.com/dyoshikawa/rulesync) to see the details.

I also donwload the soure code of `dyoshikawa/rulesync` into folder`vendors/rulesync`. You can refer to if needed.

### Requirements

- Understand rulesync's source code architecture in `vendors/rulesync`

- Create `scripts/setup-all.sh` bash script that:
  - Wraps rulesync CLI to sync rd2 plugins to vibe coding tools
  - Supports modular design for easy tool addition
  - Accepts arguments to specify which tools to sync (e.g., --tools=antigravity,gemini)

- Target tools: Antigravity, auggie, gemini CLI, opencode (expandable)

- Sync features: rules, commands, subagents, skills (configurable)

**Acceptance Criteria:**
- [ ] Script successfully syncs rd2 plugins to all vibe coding tools
- [ ] Script supports modular design (easy to add new tools)
- [ ] Script accepts command-line arguments to specify target tools
- [ ] Generated configurations are valid and tested with each tool
- [ ] Documentation includes usage examples and tool-specific notes

### Q&A

[Clarifications added during planning phase]

### Design

**Architecture:**
```
scripts/setup-all.sh
├── Tool Modules (scripts/tools/*.sh)
│   ├── antigravity.sh
│   ├── gemini-cli.sh
│   ├── auggie.sh
│   └── opencode.sh
└── Shared Functions (scripts/lib/*.sh)
    ├── rulesync-wrapper.sh
    └── validation.sh
```

**Script Interface:**
```bash
# Sync all tools
./scripts/setup-all.sh

# Sync specific tools
./scripts/setup-all.sh --tools=antigravity,gemini-cli

# Sync specific features
./scripts/setup-all.sh --features=rules,commands

# Dry run
./scripts/setup-all.sh --dry-run
```

**Technology Stack:**
- Bash 4.0+ (for arrays)
- rulesync CLI (via `npx rulesync` or global install)
- jq (for JSON parsing, if needed)

**Implementation Approach:**
1. Create modular tool scripts in `scripts/tools/`
2. Each tool script defines: target name, features, and tool-specific config
3. Main script orchestrates: validation → tool sync → verification
4. Use rulesync CLI with appropriate `--targets` and `--features` flags

### Plan

**Phase 1: Analysis**
- [x] Study rulesync CLI: `npx rulesync --help`
- [x] Review existing `scripts/antigravity-install.sh` for patterns
- [x] Document tool-specific requirements (paths, configs, features)

**Phase 2: Script Development**
- [x] Create `scripts/lib/` for shared functions
- [x] Create `scripts/tools/` directory structure
- [x] Implement tool modules (antigravity.sh, gemini-cli.sh, etc.)
- [x] Implement main `scripts/setup-all.sh` orchestrator

**Phase 3: Testing & Validation**
- [x] Test each tool module individually
- [x] Test full sync with all tools
- [x] Test argument parsing (partial sync)
- [x] Validate generated configs

**Phase 4: Documentation**
- [x] Add usage examples to README
- [x] Document tool-specific notes
- [x] Create troubleshooting guide

### Artifacts

| Type | Path | Generated By | Date |
| ---- | ---- | ------------ | ---- |

### References

- [dyoshikawa/rulesync](https://github.com/dyoshikawa/rulesync)
