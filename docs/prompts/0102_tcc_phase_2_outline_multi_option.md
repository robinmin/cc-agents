---
name: TCC Phase 2 - Stage 2 Multi-Option Implementation
description: Phase 2: Implement multi-option outline generation with user selection mechanism
status: Done
created_at: 2026-01-30
updated_at: 2026-01-30
impl_progress:
  planning: completed
  design: completed
  implementation: completed
  review: completed
  testing: completed
---

## 0102. TCC Phase 2 - Stage 2 Multi-Option Implementation

### Background

The SKILL.md describes a multi-option outline generation workflow (lines 200-293) where 2-3 alternative outlines are generated in parallel, and the user selects one to become the approved outline. Currently, this functionality is documented but not implemented.

This is a critical workflow feature that provides users with flexibility and choice in content creation.

### Requirements

**Deliverables:**

1. **`scripts/outline-generator.py`**
   - Read research brief from `1-research/research-brief.md`
   - Generate 2-3 outline options in parallel:
     - Option A: Traditional/Structured (hierarchical, logical)
     - Option B: Narrative/Story-driven (engaging flow)
     - Option C: Technical/Deep-dive (comprehensive, detailed)
   - Save options to `2-outline/outline-option-{a,b,c}.md`
   - Store generation materials in `2-outline/materials/`:
     - `prompts-used.md` - Prompts for each option
     - `generation-params.json` - Generation parameters
   - Use `AskUserQuestion` to present options for selection
   - Copy selected option to `2-outline/outline-approved.md`
   - Command-line interface with argparse

2. **`references/outline-multi-option.md`**
   - Complete Stage 2 workflow documentation
   - Outline option style descriptions
   - User selection mechanism
   - Output file structure
   - Frontmatter format examples
   - Materials storage explanation
   - Traceability and debugging guidance

3. **Update SKILL.md**
   - Add reference to `scripts/outline-generator.py`
   - Add reference to `references/outline-multi-option.md`
   - Update Stage 2 section to mention the script

**Acceptance Criteria:**
- Script generates 3 outline options from research brief
- Each option uses distinct style/approach
- User can select preferred option via AskUserQuestion
- Selected option copied to outline-approved.md
- Materials stored for traceability
- Documentation complete in references/

### Q&A

**Q:** Should the script call an LLM directly to generate outlines?
**A:** No - the script generates outline templates based on the research brief content. The actual LLM-based generation would be handled by the wt:it-writer agent. The script provides the framework and prompts for generation.

**Q:** How does the user select an option when not running interactively?
**A:** The script supports non-interactive mode (`--approve b`) for approving a specific option after generation. The list command (`--list`) shows available options.

**Q:** What happens if the research brief doesn't exist?
**A:** The script validates that `1-research/research-brief.md` exists and provides a clear error message directing the user to complete Stage 1 first.

### Design

[Architecture/specs added by specialists]

### Plan

1. Implement outline-generator.py core logic
2. Add parallel option generation
3. Implement AskUserQuestion integration
4. Add materials storage
5. Create references/outline-multi-option.md
6. Update SKILL.md references
7. Test with sample research brief
8. Verify all 3 options generate correctly

### Artifacts

| Type | Path | Generated By | Date |
|------|------|--------------|------|
| Script | scripts/outline-generator.py | Phase 2 | 2026-01-30 |
| Reference | references/outline-multi-option.md | Phase 2 | 2026-01-30 |
| Updated | SKILL.md | Phase 2 | 2026-01-30 |
| Updated | scripts/README.md | Phase 2 | 2026-01-30 |

### Implementation Summary

**Completed:** 2026-01-30

All deliverables have been successfully implemented:

1. **`scripts/outline-generator.py`** - A complete Python script with argparse CLI that:
   - Reads research brief from `1-research/research-brief.md`
   - Generates 2-3 outline options (A: Traditional, B: Narrative, C: Technical)
   - Saves options to `2-outline/outline-option-{a,b,c}.md` with proper frontmatter
   - Stores generation materials in `2-outline/materials/`
   - Supports interactive and non-interactive selection modes
   - Includes `--list` command to view existing options
   - Copies selected option to `2-outline/outline-approved.md`

2. **`references/outline-multi-option.md`** - Comprehensive documentation covering:
   - Complete Stage 2 workflow process
   - Detailed descriptions of each outline option style
   - User selection mechanism
   - Output file structure and frontmatter formats
   - Materials storage explanation
   - Traceability and debugging guidance
   - Command-line interface reference
   - Best practices

3. **Updated SKILL.md** - Added:
   - Reference to `scripts/outline-generator.py` in Skill Resources table
   - Reference to `references/outline-multi-option.md` in Skill Resources table
   - Implementation note in Stage 2 section

4. **Updated scripts/README.md** - Added:
   - Documentation for `outline-generator.py` script
   - Usage examples and feature list
   - Updated file structure table

### References

- SKILL.md lines 200-293 (Stage 2 multi-option workflow)
- Existing stage-details.md
