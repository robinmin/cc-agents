---
name: simplify the output of command tasks list
description: Simplify tasks list output to show active folder only with per-folder kanban files
status: Done
created_at: 2026-02-12 10:05:13
updated_at: 2026-02-12 10:50:00
impl_progress:
  planning: completed
  design: completed
  implementation: completed
  review: completed
  testing: completed
---

## 0199. simplify the output of command tasks list

### Background

After the recent enhancement of `rd2:tasks`(in plugins/rd2/skills/tasks/), we support multiple task folders now. We need to simplify the output of command tasks list to make it more user-friendly and adapt with the multiple task folders.

Instead of keeping all tasks list in the command `tasks list` output, we will show current folder's tasks list only. That means we need to show the data from `docs/.tasks/kanban_[phase-name].md` instead of `docs/.tasks/kanban.md`. The `phase-name` here is loaded from attribute `active_folder` in`docs/.tasks/config.jsonc` and applied a `basename` function to get the folder name. For example, The value of `active_folder` is `docs/tasks`, so the file path will be `docs/.tasks/kanban_tasks.md`.

And also, we need to fix another tiny issue with the sequence of tasks. We will sort the tasks by their file name(that means by WBS as all task file is starting with WBS as the prefix).

Accordingly, command `tasks refresh` will also need to be updated for the same approach.

### Requirements

1. `tasks list` shows only the active folder's tasks from per-folder kanban file
2. Kanban file is named `kanban_<folder_name>.md` (e.g., `kanban_tasks.md`, `kanban_prompts.md`)
3. Tasks are sorted by filename (WBS order) in the output
4. `tasks refresh` creates per-folder kanban files for each configured folder
5. `tasks init` creates the per-folder kanban file for the active folder

### Design

1. **TasksConfig.kanban_file property**: Returns `docs/.tasks/kanban_<folder_name>.md` based on active folder
2. **TasksConfig.get_kanban_file_for_folder()**: New method to get kanban path for any folder
3. **cmd_refresh**: Iterates all folders, creates per-folder kanban files, sorts tasks by filename
4. **cmd_init**: Creates per-folder kanban file using the folder basename

### Solution

Modified `plugins/rd2/skills/tasks/scripts/tasks.py`:

1. Updated `kanban_file` property to return per-folder path:
   ```python
   folder_name = self.active_folder.name  # e.g., "tasks" from "docs/tasks"
   return self.meta_dir / f"kanban_{folder_name}.md"
   ```

2. Added `get_kanban_file_for_folder()` method for cross-folder operations

3. Updated `cmd_refresh` to:
   - Process each folder separately
   - Create per-folder kanban files
   - Sort tasks by filename (WBS order)

4. Updated `cmd_init` to create per-folder kanban file

5. Fixed validate to not require kanban file for refresh command

### Artifacts

| Type | Path | Generated By | Date |
| ---- | ---- | ------------ | ---- |
| Code | plugins/rd2/skills/tasks/scripts/tasks.py | super-coder | 2026-02-12 |
| Tests | plugins/rd2/skills/tasks/tests/test_tasks.py | super-coder | 2026-02-12 |

### References

- Task 0184: Centralized docs/.tasks/ metadata + multi-folder support
